#!/usr/bin/env bash
# Sets up Nginx with a custom HTTP response header showing the hostname

# Update package list and install nginx
apt-get update -y
apt-get install nginx -y

# Get the hostname
HOSTNAME=$(hostname)

# Inject custom header into nginx config
sed -i "/^\s*location \/ {/a \\n        add_header X-Served-By \"$HOSTNAME\";" /etc/nginx/sites-available/default

# Restart nginx using service (not systemctl)
service nginx restart
