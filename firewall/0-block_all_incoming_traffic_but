#!/bin/bash

echo -e "Updating packages...\n"
sudo apt-get update -y

echo -e "Installing UFW...\n"
sudo apt-get install -y ufw

echo -e "Configuring UFW...\n"

# Allow SSH first to avoid lockout
sudo ufw allow 22/tcp

# Set default policies
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Allow other necessary ports
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Enable firewall safely (non-interactive)
sudo ufw --force enable

# Show current status
sudo ufw status verbose

echo -e "Firewall setup completed safely.\n"
